<!DOCTYPE html>
<html lang="en" th:with="product=${product}" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="summary">
    <div class="col-xl-5 col-lg-5 col-md-6">
        <div id="carousel-example-1" class="single-product-slider carousel slide" data-ride="carousel">
            <div class="carousel-inner" role="listbox">

                <th:block
                        th:each="imageURL : ${#strings.arraySplit(product.img.relativePath, '')}"
                        th:if="${imageURL[0].equals('i')}">

                    <div class="carousel-item active"><img class="d-block w-100"
                                                           th:src="${product.img01.host+product.img01.relativePath}"
                                                           alt="First slide"></div>
                    <div class="carousel-item"><img class="d-block w-100"
                                                    th:src="${product.img02.host+product.img02.relativePath}"
                                                    alt=" Second slide">
                    </div>
                    <div class="carousel-item"><img class="d-block w-100"
                                                    th:src="${product.img03.host+product.img03.relativePath}"
                                                    alt=" Third slide">
                    </div>
                    <div class="carousel-item"><img class="d-block w-100"
                                                    th:src="${product.img04.host+product.img04.relativePath}"
                                                    alt=" Fourth slide">
                    </div>
                </th:block>
                <th:block
                        th:each="imageURL : ${#strings.arraySplit(product.img.relativePath, '')}"
                        th:if="${!imageURL[0].equals('i')}">

                    <div class="carousel-item active"><img class="d-block w-100"
                                                           th:src="*{'data:image/jpeg;base64,'+product.img01.relativePath}"
                                                           alt="First slide"></div>
                    <div class="carousel-item"><img class="d-block w-100"
                                                    th:src="*{'data:image/jpeg;base64,'+product.img02.relativePath}"
                                                    alt=" Second slide">
                    </div>
                    <div class="carousel-item"><img class="d-block w-100"
                                                    th:src="*{'data:image/jpeg;base64,'+product.img03.relativePath}"
                                                    alt=" Third slide">
                    </div>
                    <div class="carousel-item"><img class="d-block w-100"
                                                    th:src="*{'data:image/jpeg;base64,'+product.img04.relativePath}"
                                                    alt=" Fourth slide">
                    </div>
                </th:block>
            </div>
            <a class="carousel-control-prev" href="#carousel-example-1" role="button" data-slide="prev">
                <i class="fa fa-angle-left" aria-hidden="true"></i>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carousel-example-1" role="button" data-slide="next">
                <i class="fa fa-angle-right" aria-hidden="true"></i>
                <span class="sr-only">Next</span>
            </a>
            <ol class="carousel-indicators">
                <th:block
                        th:each="imageURL : ${#strings.arraySplit(product.img.relativePath, '')}"
                        th:if="${imageURL[0].equals('i')}">

                    <li data-target="#carousel-example-1" data-slide-to="0" class="active">
                        <img class="d-block w-100 img-fluid"
                             th:src="${product.img01.host+product.img01.relativePath}"
                             alt=""/>
                    </li>
                    <li data-target="#carousel-example-1" data-slide-to="1">
                        <img class="d-block w-100 img-fluid" th:src="${product.img02.host+product.img02.relativePath}"
                             alt=""/>
                    </li>
                    <li data-target="#carousel-example-1" data-slide-to="2">
                        <img class="d-block w-100 img-fluid" th:src="${product.img03.host+product.img03.relativePath}"
                             alt=""/>
                    </li>
                    <li data-target="#carousel-example-1" data-slide-to="3">
                        <img class="d-block w-100 img-fluid" th:src="${product.img04.host+product.img04.relativePath}"
                             alt=""/>
                    </li>
                </th:block>
                <th:block
                        th:each="imageURL : ${#strings.arraySplit(product.img.relativePath, '')}"
                        th:if="${!imageURL[0].equals('i')}">
                    <li data-target="#carousel-example-1" data-slide-to="0" class="active">
                        <img class="d-block w-100 img-fluid"
                             th:src="*{'data:image/jpeg;base64,'+product.img01.relativePath}"
                             alt=""/>
                    </li>
                    <li data-target="#carousel-example-1" data-slide-to="1">
                        <img class="d-block w-100 img-fluid"
                             th:src="*{'data:image/jpeg;base64,'+product.img02.relativePath}"
                             alt=""/>
                    </li>
                    <li data-target="#carousel-example-1" data-slide-to="2">
                        <img class="d-block w-100 img-fluid"
                             th:src="*{'data:image/jpeg;base64,'+product.img03.relativePath}"
                             alt=""/>
                    </li>
                    <li data-target="#carousel-example-1" data-slide-to="3">
                        <img class="d-block w-100 img-fluid"
                             th:src="*{'data:image/jpeg;base64,'+product.img04.relativePath}"
                             alt=""/>
                    </li>
                </th:block>
            </ol>
        </div>
    </div>
    <div class="col-xl-7 col-lg-7 col-md-6">
        <div class="single-product-details">
            <h2 th:text="${product.name}"></h2>
            <h5 class="product-price" th:text="${product.price}">
                <!--                Use for product is  on sale-->
                <!--                <del>1.900.000 vnđ</del>-->
                2.000.000 vnđ
            </h5>
            <p class="available-stock"><span> Có 20 sản phẩm/ <a href="#">0 sản phẩm đã bán </a></span>
            <p>
            <h4 class="brand-name">Thương Hiệu:<a th:text="${product.brand.name}"
                                                  th:href="@{/products(brand=${product.brand.id})}"></a></h4>
            <p>
                Huawei nova 3i có 3 tùy chọn màu sắc đầy cá tính là Trắng ngọc trai, Đen và Tím hồng ngoại.
                Với phần khung kim loại chắc chắn, mặt lưng kính bóng bẩy và cách sơn đặc biệt, Huawei nova
                3i đẹp một cách “mê hoặc”. Máy có thiết kế hiện đại, gọn gàng, vừa vặn trong túi nhưng lại
                vẫn mang trên mình màn hình lớn. Bạn sẽ được tận hưởng mọi thứ một cách rộng lớn qua màn
                hình 6,3 inch độ phân giải Full HD+ của Huawei nova 3i. Phần viền màn hình được làm tối
                giản, giúp cho kích thước tổng thể của máy gọn, đồng thời trải nghiệm xem tuyệt vời.
            </p>
            <ul>
                <li>
                    <div class="form-group quantity-box">
                        <label class="control-label">Số lượng</label>
                        <input class="form-control" value="1" min="1" id="quantity-product-detail"
                               th:attr="max=${product.amount}" type="number">
                    </div>
                </li>
            </ul>

            <div class="price-box-bar">
                <div class="cart-and-bay-btn">
                    <!-- <a class="btn hvr-hover" data-fancybox-close="" href="#">Đặt hàng ngay</a> -->
                    <button class="btn h-100 hvr-hover btnAddToCart text-light" data-fancybox-close=""
                            th:action="@{/add-to-cart}" th:value="${product.id}">Thêm vào giỏ hàng
                    </button>
                    <th:block sec:authorize="!isFullyAuthenticated()">
                        <button th:attr=" data-product=${product.id}" class="btn hvr-hover product-favorite text-light"
                                href="#"><i class="fas fa-heart"></i>
                            Yêu
                            Thích
                        </button>
                    </th:block>
                    <th:block sec:authorize="isFullyAuthenticated()">
                        <button th:attr=" data-product=${product.id}" class="btn hvr-hover product-favorite text-light"
                                th:classappend="${#authentication.getPrincipal().getUser().hasFavoriteProduct(product.id)} ? active :''"
                                href="#"><i class="fas fa-heart"></i>
                            Yêu
                            Thích
                        </button>
                    </th:block>
                </div>
            </div>

            <div class="add-to-btn">
                <div class="add-comp">
                    <!-- <a class="btn hvr-hover" href="#"><i class="fas fa-sync-alt"></i> Add to Compare</a> -->
                </div>
                <!--Start Social Media Button   -->
                <!-- <div class="share-bar">
                    <a class="btn hvr-hover" href="#"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                    <a class="btn hvr-hover" href="#"><i class="fab fa-google-plus"
                            aria-hidden="true"></i></a>
                    <a class="btn hvr-hover" href="#"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                    <a class="btn hvr-hover" href="#"><i class="fab fa-pinterest-p"
                            aria-hidden="true"></i></a>
                    <a class="btn hvr-hover" href="#"><i class="fab fa-whatsapp" aria-hidden="true"></i></a>
                </div> -->
                <!-- Finish Social Media Button   -->
            </div>
        </div>
        <hr/>
    </div>
</th:block>

</html>